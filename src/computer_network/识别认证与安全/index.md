# web服务器可能会同时与数千个连接的客户端进行通信，这些服务器需要记录一下他们正在与谁交谈而不认为所有的请求都是来自匿名的客户端

## 个性化接触

HTTP最初是一个匿名，无状态的请求/响应协议,服务器处理来自客户端的请求，然后向客户端回送一条响应，web服务器几户没有什么信息可用来判断是哪一个用户发送的请求

现代的web站点希望提供**个性化的服务**,服务器想要了解更多的客户端信息，并且能够在用户浏览器页面时对其进行跟踪

1. 个性化的问候，为不同用户提供不同的页面内容，提供个性化的服务，推荐用户感兴趣的话题，商品，投其所好

2. 记录会话，HTTP事务是无状态，每条请求和响应都是独立的，很多web站点都希望能进行增量的信息状态，那么就要有一种方式来区分不同的用户的连接

## HTTP 请求中的首部，可以携带客户端信息

承载用户信息的HTTP请求首部

首部名称 | 首部类型 | 描述
--- | --- | ---
From | 请求 | 用户的 E-mail 地址
User-Agent | 请求 | 用户的浏览器软件
Referer | 请求 | 用户是从这个页面上依照链接跳转过来的
Authorization | 请求 | 用户名和密码
Client-IP | 扩展（请求）| 客户端的 IP 地址
X-Forwarded-For | 扩展（请求）| 客户端的 IP 地址
Cookie | 扩展（请求）| 服务器产生的 ID 标签

## cookie 是实现识别用户，实现持久会话的最好方式

cookie 最早是由网景公司开发的，现在所有浏览器都支持

### cookie 的工作原理

cookie 就像服务器给用户贴的的“嗨，我叫”的贴纸一样。。用户访问一个 Web 站点时，这个 Web 站点就可以读取那个服务器贴在用户身上的所有贴纸。
用户首次访问 Web 站点时，Web 服务器对用户一无所知。Web 服务器希望这个用户会再次回来，所以想给这个用户“拍上”一个独有的 cookie，这样以后它就可以识别出这个用户了。cookie 中包含了一个由名字 = 值（name=value）这样的信息构成的任意列表，并通过 Set-Cookie 或 Set-Cookie2 HTTP 响应（扩展）首部将其贴到用户身上去。

![cookie工作原理](./cookie工作原理.png)

cookie 的基本思想就是让浏览器积累一组服务器特有的信息，每次访问服务器时都将这些信息提供给它。因为浏览器要负责存储 cookie 信息，所以此系统被称为客户端侧状态（client-side state）。